<!DOCTYPE html>
<html lang="en">
<head>
    <head th:insert="~{fragments/links.html :: links}"></head>
    <link rel="stylesheet" href="/masterProfile.css">
</head>
<body>
<header th:insert="~{fragments/navbar.html :: nav}"></header>
<div class="container">
    <div class="row">
       <!-- Profile photo,reservation list-->
        <div class="col-4">
            <div >
                <img src="/img/hairdresser.jpg" class="mx-auto d-block" alt="...">
            </div>
            <div class="text-center">
                <h3 th:text="${name}"></h3>
            </div>
            <div>
                <a type="submit" class="btn btn-primary d-grid gap-2 col-6 mx-auto" th:href="@{/reservations-list/{beauticianId}(beauticianId=${item.beautician.id})}"> My Reservations</a>
            </div>
            <!-- Edit profile section-->
            <div>
                <p>
                    <a class="btn btn-primary d-grid gap-2 col-6 mx-auto" data-bs-toggle="collapse" href="#collapseExample" role="button"
                       aria-expanded="false" aria-controls="collapseExample">
                        Edit profile
                    </a>
                </p>
            </div>

            <div class="collapse" id="collapseExample">
                <div class="card card-body">
                   <form th:action="@{/master-account/{beauticianId}/updateProfile(beauticianId=${be.id})}" th:object="${be}" method="post">
                       <div>
                           <label>Email</label>
                           <input th:field="*{email}"  type="text" name="email" class="form-control" placeholder="email">
                       </div>

                       <div>
                           <label>Address</label>
                           <input th:field="*{address}" type="text" name="address" class="form-control" placeholder="address">
                       </div>

                       <div>
                           <label >Phone number</label>
                           <input  th:field="*{phoneNumber}" type="text" name="phoneNumber" class="form-control" placeholder="phone number">
                       </div>

                       <div class="mb-3">
                           <label >About me</label>
                           <textarea th:field="*{aboutMe}" class="form-control" rows="3" placeholder="About me"></textarea>
                       </div>
                       <!--<input hidden="hidden" th:field="*{id}"/>-->
                       <div>
                           <button type="submit" class="btn btn-success">Update Profile</button>
                       </div>
                   </form>

                </div>
            </div>
        </div>

        <!-- navigation tab-->
        <div class="col-8">
            <ul class="nav nav-tabs" id="myTab" role="tablist">
                <li class="nav-item" role="presentation">
                    <button class="nav-link" id="home-tab" data-bs-toggle="tab"
                            data-bs-target="#home-tab-pane" type="button" role="tab" aria-controls="home-tab-pane"> Profile
                    </button>
                </li>
                <li class="nav-item" role="presentation" >
                    <button class="nav-link" id="price-list-tab" data-bs-toggle="tab" data-bs-target="#price-list-tab-pane"
                            type="button" role="tab" aria-controls="price-list-tab-pane" aria-selected="false">Price List
                    </button>
                </li>
                <li class="nav-item" role="presentation">
                    <button class="nav-link" id="contact-tab" data-bs-toggle="tab" data-bs-target="#contact-tab-pane"
                            type="button" role="tab" aria-controls="contact-tab-pane" aria-selected="false"> Portfolio
                    </button>
                </li>
            </ul>

         <!--   Content-->
            <div class="tab-content" id="myTabContent">
                <div class="tab-pane fade" id="home-tab-pane" role="tabpanel" aria-labelledby="home-tab"
                     tabindex="0">
                    <div>
                        <h5>About me:</h5>
                        <p th:text="${item.beautician.aboutMe}"></p>
                    </div>
                    <div>
                        <h5>Address:</h5>
                        <p th:text="${item.beautician.address}"></p>
                    </div>
                    <div>
                        <h5>Email:</h5>
                        <p th:text="${item.beautician.email}"></p>
                    </div>
                    <div>
                        <h5>Phone number:</h5>
                        <p th:text="${item.beautician.phoneNumber}"></p>
                    </div>

                </div>

           <!--     Price list-->
                <div class="tab-pane fade show active" id="price-list-tab-pane" data-toggle="tab" role="tabpanel" aria-labelledby="price-list-tab"
                     tabindex="0">
                    <form th:action="@{/master-account/{beauticianId}/addPriceList(beauticianId=${item.beautician.id})}" th:object="${item}" method="post"
                          class="row g-3 align-items-center">
                        <div class="col-4">
                            <label class="visually-hidden">Name</label>
                            <div class="input-group">
                                <input th:field="*{name}" name="name" type="input" class="form-control" placeholder="Name">
                            </div>
                        </div>
                        <div class="col-4">
                            <label class="visually-hidden">Price</label>
                            <div class="input-group">
                                <input th:field="*{price}" name="price" type="input" class="form-control" placeholder="Price">
                            </div>
                            <input hidden="hidden" th:field="*{beautician}"/>
                        </div>
                        <div class="col-4">
                            <button type="submit" class="btn btn-primary">Add new</button>
                        </div>
                    </form>
                    <table class="table">
                        <thead>
                        <tr>
                            <th scope="col">#</th>
                            <th scope="col">Service name</th>
                            <th scope="col">Price</th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr scope="row" th:each="item, it : ${itemList}">
                            <td th:text="${it.index + 1}"></td>
                            <td th:text="${item.name}"></td>
                            <td th:text="${item.price}"></td>
                        </tr>
                        </tbody>
                    </table>
                </div>
              <!--  Portfolio-->
                <div class="tab-pane fade" id="contact-tab-pane" role="tabpanel" aria-labelledby="contact-tab"
                     tabindex="0">
                    Display Images
                </div>
            </div>
        </div>
    </div>
</div>
<script>
    function activatePriceListab() {
        console.log("activating tab");
        var triggerEl = document.querySelector('#price-list-tab')
        var tab = new bootstrap.Tab(triggerEl);
        tab.show();
    }
    document.addEventListener("DOMContentLoaded", function() {
        activatePriceListab();
    });
</script>
</body>
</html>